(this["webpackJsonpibcm-editor"]=this["webpackJsonpibcm-editor"]||[]).push([[0],{12:function(e,t,a){e.exports=a(19)},17:function(e,t,a){},19:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(11),o=a.n(r);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(17);var c=a(6),s=a.n(c),l=a(8),u=a(9),p=a(1),d=a(2),h=a(4),m=a(3),b=a(5),f=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{id:"toolbar"},i.a.createElement("h1",null,"IBCM Editor"),i.a.createElement("div",null,i.a.createElement("button",{onClick:this.props.uploader.bind(this),title:"Upload"},i.a.createElement("i",{className:"fas fa-file-upload"})),i.a.createElement("button",{onClick:this.props.resetter.bind(this),title:"Reset"},i.a.createElement("i",{className:"fas fa-undo-alt"})),i.a.createElement("button",{onClick:this.props.exportter.bind(this),title:"Download"},i.a.createElement("i",{className:"fas fa-file-download"}))))}}]),t}(i.a.Component),v=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"ibcm-header"},i.a.createElement("label",null,"Memory"),i.a.createElement("label",null,"Value"),i.a.createElement("label",null,"Description"),i.a.createElement("label",null,"Comments"))}}]),t}(i.a.Component),E=a(7),y={0:"halt",1:"i/o",2:"shift",3:"load",4:"store",5:"add",6:"subtract",7:"and",8:"or",9:"xor",A:"not",B:"nop",C:"jmp",D:"jmpe",E:"jmpl",F:"brl"},O=function(e){function t(){var e;return Object(p.a)(this,t),(e=Object(h.a)(this,Object(m.a)(t).call(this))).state={open:!1},e}return Object(b.a)(t,e),Object(d.a)(t,[{key:"toggle",value:function(){this.setState({open:!this.state.open})}},{key:"updateOpcode",value:function(e){this.toggle(),this.props.updateOpcode(e)}},{key:"render",value:function(){var e=this,t=[],a=function(a){t.push(i.a.createElement("li",{key:a,onClick:function(){return e.updateOpcode(a)}},"".concat(a," - ").concat(y[a])))};for(var n in y)a(n);return i.a.createElement("div",{className:"ibcm-opcode"},i.a.createElement("div",{className:"ibcm-opcode-selected",onClick:function(){return e.toggle()}},this.props.opcode),this.state.open&&i.a.createElement("ul",{className:"ibcm-opcode-dropdown",onMouseLeave:function(){return e.toggle()}},t))}}]),t}(i.a.Component),j=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(d.a)(t,[{key:"handleChange",value:function(e){this.props.updateComments(e.target.value)}},{key:"render",value:function(){return i.a.createElement("div",{className:"ibcm-comments"},i.a.createElement("input",{type:"text",value:this.props.comments,onChange:this.handleChange.bind(this)}))}}]),t}(i.a.Component),g=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(d.a)(t,[{key:"handleChange",value:function(e){this.props.updateBody(e.target.value)}},{key:"fillin",value:function(e){this.props.updateBody(e.target.value.padStart(3,"0"))}},{key:"render",value:function(){return i.a.createElement("div",{className:"ibcm-body"},i.a.createElement("input",{type:"text",maxLength:"3",value:this.props.body,onChange:this.handleChange.bind(this),onBlur:this.fillin.bind(this)}))}}]),t}(i.a.Component),k=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(d.a)(t,[{key:"handleChange",value:function(e){this.props.updateDescription(e.target.value)}},{key:"render",value:function(){return i.a.createElement("div",{className:"ibcm-description"},i.a.createElement("input",{type:"text",value:this.props.description,onChange:this.handleChange.bind(this),disabled:!this.props.userEdit}),i.a.createElement("button",{title:"Toggle Edit",onClick:this.props.updateUserEdit.bind(this)},this.props.userEdit&&i.a.createElement("i",{className:"fas fa-user-slash"}),!this.props.userEdit&&i.a.createElement("i",{className:"far fa-user-edit"})))}}]),t}(i.a.Component),C=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"ibcm-insert"},i.a.createElement("button",{onClick:this.props.insertRow.bind(this),title:"Add Row"},i.a.createElement("i",{className:"fal fa-plus"})))}}]),t}(i.a.Component);function w(e){var t="";try{var a=e.body,n=parseInt(a,16).toString(2).padStart(12,"0");switch(e.opcode){case"0":t="halt";break;case"1":var i="0"===n.charAt(0)?"input":"output",r="0"===n.charAt(1)?"hex":"ascii";t="".concat(i," ").concat(r);break;case"2":var o="0"===n.charAt(0)?"shift":"rotate",c="0"===n.charAt(1)?"left":"right",s=parseInt(n.substring(n.length-3),2);t="".concat(o," ").concat(c," by ").concat(s);break;default:var l=y[e.opcode];t="".concat(l," ").concat(a)}}catch(u){console.log(u)}return t}var x=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(d.a)(t,[{key:"updateOpcode",value:function(e){var t=Object(E.a)({},this.props.ibcm);t.opcode=e,t.userEdit||(t.description=w(t)),this.props.editor(this.props.addr,t)}},{key:"updateComments",value:function(e){var t=Object(E.a)({},this.props.ibcm);t.comments=e,this.props.editor(this.props.addr,t)}},{key:"updateBody",value:function(e){var t=Object(E.a)({},this.props.ibcm);t.body=e,t.userEdit||(t.description=w(t)),this.props.editor(this.props.addr,t)}},{key:"updateDescription",value:function(e){var t=Object(E.a)({},this.props.ibcm);t.userEdit&&(t.description=e),this.props.editor(this.props.addr,t)}},{key:"updateUserEdit",value:function(){var e=Object(E.a)({},this.props.ibcm);e.userEdit=!e.userEdit,e.userEdit||(e.description=w(e)),this.props.editor(this.props.addr,e)}},{key:"insertRow",value:function(){this.props.insertRow(this.props.addr)}},{key:"render",value:function(){return i.a.createElement("div",{className:"ibcm-row",id:this.props.addr},i.a.createElement("div",{className:"ibcm-address"},this.props.addr.toString(16).padStart(3,"0")),i.a.createElement("div",{className:"ibcm-value"},i.a.createElement(O,{opcode:this.props.ibcm.opcode,updateOpcode:this.updateOpcode.bind(this)}),i.a.createElement(g,{body:this.props.ibcm.body,updateBody:this.updateBody.bind(this)})),i.a.createElement(k,{description:this.props.ibcm.description,userEdit:this.props.ibcm.userEdit,updateDescription:this.updateDescription.bind(this),updateUserEdit:this.updateUserEdit.bind(this)}),i.a.createElement(j,{comments:this.props.ibcm.comments,updateComments:this.updateComments.bind(this)}),i.a.createElement(C,{insertRow:this.insertRow.bind(this)}))}}]),t}(i.a.Component);var I=function(e){for(var t=[],a=0,n=e.length,i=e.length-1;i>=0;i--){"0"===e[i].opcode&&"000"===e[i].body||n!==e.length||(n=i+2);var r="".concat(e[i].opcode+e[i].body,"\t").concat(i.toString(16).padStart(3,"0"),"\t").concat(e[i].description);r.length>a&&(a=r.length),t.unshift(r.trimRight())}for(var o="",c=0;c<n;c++){var s=o[c].padEnd(a," ")+"\t"+e[c].comments;o+=s+"\n"}var l=document.createElement("a"),u=new Blob([o],{type:"text/plain"});l.href=URL.createObjectURL(u),l.download="file.ibcm",document.body.appendChild(l),l.click()},N={opcode:"0",body:"000",comments:"",description:"halt",userEdit:!1};function R(){return(R=Object(l.a)(s.a.mark((function e(t){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(t);case 2:return a=(a=e.sent).split("\n"),n=a.map((function(e){var t=e.split("\t");return t.length<=2?N:{opcode:t[0].substring(0,1),body:t[0].substring(1,4),comments:t.length>=4?t[3].trimRight():"",description:t.length>=3?t[2].trimRight():"",userEdit:!1}})),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e){var t=new FileReader;return new Promise((function(a,n){t.onload=function(e){return a(e.target.result)},t.onerror=function(e){return n(e)},t.readAsText(e)}))}var B=function(e){return R.apply(this,arguments)},U=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(d.a)(t,[{key:"getFile",value:function(e){var t=e.target;"files"in t&&t.files.length>0&&this.props.uploadFile(t.files[0])}},{key:"render",value:function(){return i.a.createElement("div",{id:"ibcm-upload"},i.a.createElement("h4",null,"Upload File"),i.a.createElement("input",{type:"file",id:"input-file",onChange:this.getFile.bind(this)}))}}]),t}(i.a.Component),F={opcode:"0",body:"000",comments:"",description:"halt",userEdit:!1},A=function(e){function t(){var e;Object(p.a)(this,t),e=Object(h.a)(this,Object(m.a)(t).call(this));for(var a=[],n=0;n<20;n++)a.push(F);return e.state={ibcm:a,uploadIbcm:!1},e}return Object(b.a)(t,e),Object(d.a)(t,[{key:"updateIbcm",value:function(e,t){var a=Object(u.a)(this.state.ibcm);a[e]=t,this.setState({ibcm:a})}},{key:"resetIbcm",value:function(){for(var e=[],t=0;t<100;t++)e.push(F);this.setState({ibcm:e})}},{key:"exportIbcm",value:function(){I(this.state.ibcm)}},{key:"showUploadIbcm",value:function(){this.setState({uploadIbcm:!this.state.uploadIbcm})}},{key:"insertRow",value:function(e){var t=Object(u.a)(this.state.ibcm);t.splice(e+1,0,F),this.setState({ibcm:t})}},{key:"uploadFile",value:function(){var e=Object(l.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B(t);case 3:a=e.sent,this.setState({ibcm:a,uploadIbcm:!1}),e.next=12;break;case 7:e.prev=7,e.t0=e.catch(0),alert("Error reading file."),console.log(e.t0),this.setState({uploadIbcm:!1});case 12:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.ibcm.map((function(t,a){return i.a.createElement(x,{key:a,addr:a,ibcm:t,editor:e.updateIbcm.bind(e),insertRow:e.insertRow.bind(e)})}));return i.a.createElement("div",{id:"editor"},i.a.createElement(f,{resetter:this.resetIbcm.bind(this),exportter:this.exportIbcm.bind(this),uploader:this.showUploadIbcm.bind(this)}),this.state.uploadIbcm&&i.a.createElement(U,{uploadFile:this.uploadFile.bind(this)}),i.a.createElement(v,null),t)}}]),t}(i.a.Component);var D=function(){return i.a.createElement("div",{className:"App"},i.a.createElement(A,null))};o.a.render(i.a.createElement(D,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[12,1,2]]]);
//# sourceMappingURL=main.ea1cc03b.chunk.js.map